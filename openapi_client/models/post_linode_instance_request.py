# coding: utf-8

"""
    Linode API

    [Read the API documentation](https://techdocs.akamai.com/linode-api/reference/api).

    The version of the OpenAPI document: 4.189.2
    Contact: support@linode.com
    Generated by OpenAPI Generator (https://openapi-generator.tech)

    Do not edit the class manually.
"""  # noqa: E501


from __future__ import annotations
import pprint
import re  # noqa: F401
import json

from pydantic import BaseModel, ConfigDict, Field, StrictBool, StrictInt, StrictStr, field_validator
from typing import Any, ClassVar, Dict, List, Optional
from typing_extensions import Annotated
from openapi_client.models.post_linode_instance_request_all_of_interfaces_inner import PostLinodeInstanceRequestAllOfInterfacesInner
from openapi_client.models.post_linode_instance_request_all_of_metadata import PostLinodeInstanceRequestAllOfMetadata
from openapi_client.models.post_linode_instance_request_all_of_placement_group import PostLinodeInstanceRequestAllOfPlacementGroup
from typing import Optional, Set
from typing_extensions import Self

class PostLinodeInstanceRequest(BaseModel):
    """
    PostLinodeInstanceRequest
    """ # noqa: E501
    authorized_keys: Optional[List[StrictStr]] = Field(default=None, description="A list of public SSH keys that will be automatically appended to the root user's `~/.ssh/authorized_keys` file when deploying from an Image.")
    authorized_users: Optional[List[StrictStr]] = Field(default=None, description="A list of usernames. If the usernames have associated SSH keys, the keys will be appended to the root users `~/.ssh/authorized_keys` file automatically when deploying from an Image.")
    booted: Optional[StrictBool] = Field(default=True, description="This field defaults to `true` if the Linode is created with an Image or from a Backup. If it is deployed from an Image or a Backup and you wish it to remain `offline` after deployment, set this to `false`.")
    disk_encryption: Optional[StrictStr] = Field(default=None, description="Local disk encryption ensures that your data stored on Linodes is secured. Disk encryption protects against unauthorized data access by keeping the data encrypted if the disk is ever removed from the data center, decommissioned, or disposed of. The platform manages the encryption and decryption for you.  By default, encryption is `enabled` on all Linodes. If you opted out of encryption or if the Linode was created prior to local disk encryption support, you can encrypt your data using [Rebuild](https://techdocs.akamai.com/linode-api/reference/post-rebuild-linode-instance).")
    image: Optional[StrictStr] = Field(default=None, description="An Image ID to deploy the Linode Disk from.  Run the [List images](https://techdocs.akamai.com/linode-api/reference/get-images) operation with authentication to view all available Images. Official Linode Images start with `linode/`, while your Account's Images start with `private/`. Creating a disk from a Private Image requires `read_only` or `read_write` permissions for that Image. Run the [Update a user's grants](https://techdocs.akamai.com/linode-api/reference/put-user-grants) operation to adjust permissions for an Account Image.")
    metadata: Optional[PostLinodeInstanceRequestAllOfMetadata] = None
    root_pass: Optional[Annotated[str, Field(min_length=7, strict=True, max_length=128)]] = Field(default=None, description="This sets the root user's password on a newly created Linode Disk when deploying from an Image.  - __Required__ when creating a Linode Disk from an Image, including when using a StackScript.  - Must meet a password strength score requirement that is calculated internally by the API. If the strength requirement is not met, you will receive a `Password does not meet strength requirement` error.")
    stackscript_data: Optional[Dict[str, Any]] = Field(default=None, description="This field is required only if the StackScript being deployed requires input data from the User for successful completion. See [User Defined Fields (UDFs)](https://www.linode.com/docs/products/tools/stackscripts/guides/write-a-custom-script/#declare-user-defined-fields-udfs) for more details.  This field is required to be valid JSON.  Total length cannot exceed 65,535 characters.")
    stackscript_id: Optional[StrictInt] = Field(default=None, description="A StackScript ID that will cause the referenced StackScript to be run during deployment of this Linode. A compatible `image` is required to use a StackScript. To get a list of available StackScript and their permitted Images, run [List StackScripts](https://techdocs.akamai.com/linode-api/reference/get-stack-scripts). This field cannot be used when deploying from a Backup or a Private Image.")
    backup_id: Optional[StrictInt] = Field(default=None, description="A Backup ID from another Linode's available backups. Your User must have `read_write` access to that Linode, the Backup must have a `status` of `successful`, and the Linode must be deployed to the same `region` as the Backup. Run [List backups](https://techdocs.akamai.com/linode-api/reference/get-backups) for a Linode's available backups.  This field and the `image` field are mutually exclusive.")
    backups_enabled: Optional[StrictBool] = Field(default=None, description="If this field is set to `true`, the created Linode will automatically be enrolled in the Linode Backup service. This will incur an additional charge. The cost for the Backup service is dependent on the Type of Linode deployed.  This option is always treated as `true` if the account-wide `backups_enabled` setting is `true`.  See [Get account settings](https://techdocs.akamai.com/linode-api/reference/get-account-settings) for more information.  Backup pricing is included in the response from [List types](https://techdocs.akamai.com/linode-api/reference/get-linode-types)")
    firewall_id: Optional[StrictInt] = Field(default=None, description="The `id` of the Firewall to attach this Linode to upon creation.")
    group: Optional[StrictStr] = Field(default=None, description="The group label for this Linode.")
    interfaces: Optional[Annotated[List[PostLinodeInstanceRequestAllOfInterfacesInner], Field(min_length=1, max_length=3)]] = Field(default=None, description="An array of Network Interfaces to add to this Linode's Configuration Profile. At least one and up to three Interface objects can exist in this array. The position in the array determines which of the Linode's network Interfaces is configured:  - First [0]:  eth0 - Second [1]: eth1 - Third [2]:  eth2  When updating a Linode's Interfaces, _each Interface must be redefined_. An empty `interfaces` array results in a default `public` type Interface configuration only.  If no public Interface is configured, public IP addresses are still assigned to the Linode but will not be usable without manual configuration.  __Note__. Changes to Linode Interface configurations can be enabled by rebooting the Linode.  `vpc` details  See the [VPC documentation](https://www.linode.com/docs/products/networking/vpc/#technical-specifications) guide for its specifications and limitations.  `vlan` details  - Only Next Generation Network (NGN) data centers support VLANs. Run the [List regions](https://techdocs.akamai.com/linode-api/reference/get-regions) operation to view the capabilities of data center regions. If a VLAN is attached to your Linode and you attempt to migrate or clone it to a non-NGN data center, the migration or cloning will not initiate. If a Linode cannot be migrated or cloned because of an incompatibility, you will be prompted to select a different data center or contact support. - See the [VLANs Overview](https://www.linode.com/docs/products/networking/vlans/#technical-specifications) guide to view additional specifications and limitations.")
    label: Optional[Annotated[str, Field(min_length=3, strict=True, max_length=64)]] = Field(default=None, description="Provides a name for the Linode. If not provided, the API generates one for it.  Linode labels have the following constraints:  - It needs to begin and end with an alphanumeric character. - It can only consist of alphanumeric characters, hyphens (`-`), underscores (`_`) or periods (`.`). - Cannot have two hyphens (`--`), underscores (`__`) or periods (`..`) in a row.")
    placement_group: Optional[PostLinodeInstanceRequestAllOfPlacementGroup] = None
    private_ip: Optional[StrictBool] = Field(default=None, description="If true, the created Linode will have private networking enabled and assigned a private IPv4 address.")
    region: StrictStr = Field(description="The [region](https://techdocs.akamai.com/linode-api/reference/get-regions) where the Linode will be located.")
    swap_size: Optional[StrictInt] = Field(default=512, description="When deploying from an Image, this field is optional, otherwise it is ignored. This is used to set the swap disk size for the newly created Linode.")
    tags: Optional[List[StrictStr]] = Field(default=None, description="Tags to help you organize your content.")
    type: StrictStr = Field(description="The [Linode type](https://techdocs.akamai.com/linode-api/reference/get-linode-types) of the Linode you are creating.")
    __properties: ClassVar[List[str]] = ["authorized_keys", "authorized_users", "booted", "disk_encryption", "image", "metadata", "root_pass", "stackscript_data", "stackscript_id", "backup_id", "backups_enabled", "firewall_id", "group", "interfaces", "label", "placement_group", "private_ip", "region", "swap_size", "tags", "type"]

    @field_validator('disk_encryption')
    def disk_encryption_validate_enum(cls, value):
        """Validates the enum"""
        if value is None:
            return value

        if value not in set(['enabled', 'disabled']):
            raise ValueError("must be one of enum values ('enabled', 'disabled')")
        return value

    @field_validator('label')
    def label_validate_regular_expression(cls, value):
        """Validates the regular expression"""
        if value is None:
            return value

        if not re.match(r"^[a-zA-Z]((?!--|__|\.\.)[a-zA-Z0-9-_.])+$", value):
            raise ValueError(r"must validate the regular expression /^[a-zA-Z]((?!--|__|\.\.)[a-zA-Z0-9-_.])+$/")
        return value

    model_config = ConfigDict(
        populate_by_name=True,
        validate_assignment=True,
        protected_namespaces=(),
    )


    def to_str(self) -> str:
        """Returns the string representation of the model using alias"""
        return pprint.pformat(self.model_dump(by_alias=True))

    def to_json(self) -> str:
        """Returns the JSON representation of the model using alias"""
        # TODO: pydantic v2: use .model_dump_json(by_alias=True, exclude_unset=True) instead
        return json.dumps(self.to_dict())

    @classmethod
    def from_json(cls, json_str: str) -> Optional[Self]:
        """Create an instance of PostLinodeInstanceRequest from a JSON string"""
        return cls.from_dict(json.loads(json_str))

    def to_dict(self) -> Dict[str, Any]:
        """Return the dictionary representation of the model using alias.

        This has the following differences from calling pydantic's
        `self.model_dump(by_alias=True)`:

        * `None` is only added to the output dict for nullable fields that
          were set at model initialization. Other fields with value `None`
          are ignored.
        """
        excluded_fields: Set[str] = set([
        ])

        _dict = self.model_dump(
            by_alias=True,
            exclude=excluded_fields,
            exclude_none=True,
        )
        # override the default output from pydantic by calling `to_dict()` of metadata
        if self.metadata:
            _dict['metadata'] = self.metadata.to_dict()
        # override the default output from pydantic by calling `to_dict()` of each item in interfaces (list)
        _items = []
        if self.interfaces:
            for _item_interfaces in self.interfaces:
                if _item_interfaces:
                    _items.append(_item_interfaces.to_dict())
            _dict['interfaces'] = _items
        # override the default output from pydantic by calling `to_dict()` of placement_group
        if self.placement_group:
            _dict['placement_group'] = self.placement_group.to_dict()
        return _dict

    @classmethod
    def from_dict(cls, obj: Optional[Dict[str, Any]]) -> Optional[Self]:
        """Create an instance of PostLinodeInstanceRequest from a dict"""
        if obj is None:
            return None

        if not isinstance(obj, dict):
            return cls.model_validate(obj)

        _obj = cls.model_validate({
            "authorized_keys": obj.get("authorized_keys"),
            "authorized_users": obj.get("authorized_users"),
            "booted": obj.get("booted") if obj.get("booted") is not None else True,
            "disk_encryption": obj.get("disk_encryption"),
            "image": obj.get("image"),
            "metadata": PostLinodeInstanceRequestAllOfMetadata.from_dict(obj["metadata"]) if obj.get("metadata") is not None else None,
            "root_pass": obj.get("root_pass"),
            "stackscript_data": obj.get("stackscript_data"),
            "stackscript_id": obj.get("stackscript_id"),
            "backup_id": obj.get("backup_id"),
            "backups_enabled": obj.get("backups_enabled"),
            "firewall_id": obj.get("firewall_id"),
            "group": obj.get("group"),
            "interfaces": [PostLinodeInstanceRequestAllOfInterfacesInner.from_dict(_item) for _item in obj["interfaces"]] if obj.get("interfaces") is not None else None,
            "label": obj.get("label"),
            "placement_group": PostLinodeInstanceRequestAllOfPlacementGroup.from_dict(obj["placement_group"]) if obj.get("placement_group") is not None else None,
            "private_ip": obj.get("private_ip"),
            "region": obj.get("region"),
            "swap_size": obj.get("swap_size") if obj.get("swap_size") is not None else 512,
            "tags": obj.get("tags"),
            "type": obj.get("type")
        })
        return _obj


